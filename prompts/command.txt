
ì°¸ê³ íŒŒì¼
ê±°ì ê°„ ì´ë™ ê±°ë¦¬:C:\Users\user\Desktop\barcode-anomaly-detection\data\processed\business_step_transition_avg_v2.csv
location_id :data/processed/location_id_scan_location_matching.csv
ê²½ìœ„ë„ê°’ :C:\Users\user\Desktop\barcode-anomaly-detection\data\processed\location_id_withGeospatial.csv

ë°±ì—”ë“œê°€ ì¤„ ì œì´ìŠ¨ í˜•íƒœ
eventId ê°™ì€ ê²½ìš°ëŠ”  event_type + location_id + event_time ì¡°í•©ìœ¼ë¡œ ë°±ì—”ë“œê°€ ì•Œì•„ì„œ ì¤„ ê²ƒì„. 
{
  "data": [
    {
      "eventId": 101,
      "epc_code": "001.8804823.0000001.000001.20240701.000000001",
      "location_id": 1,
      "business_step": "Factory",
      "event_type": "Outbound",
      "event_time": "2024-07-02 09:00:00",
      "file_id": 1
    },
    {
      "eventId": 102,
      "epc_code": "001.8804823.0000001.000001.20240701.000000001",
      "location_id": 2,
      "business_step": "WMS",
      "event_type": "Inbound",
      "event_time": "2024-07-02 11:00:00",
      "file_id": 1
    },
    {
      "eventId": 103,
      "epc_code": "001.8804823.0000001.000001.20240701.000000001",
      "location_id": 3,
      "business_step": "Wholesaler",
      "event_type": "Inbound",
      "event_time": "2024-07-03 09:30:00",
      "file_id": 1
    }
  ]
}



ë°±ì—”ë“œê°€ ë°”ë¼ëŠ” ì¶œë ¥ í˜•íƒœ
{
  "fileId": 1,
   // eventId ë³„ ì–´ë””ê°€ ì–´ë–»ê²Œ ì´ìƒí•œì§€ (ì´ìƒí•œ ì• ë“¤ë§Œ ì „ë‹¬)
  "EventHistory": [
    {
      "eventId": 1234, 
      "jump": true,
      "jumpScore": 60.0,
      "evtOrderErr": true,
      "evtOrderErrScore": 45.0,
      "epcDup": true,
      "epcDupScore": 90.0
    },
    {
      "eventId": 1235,
      "jump": true,
      "jumpScore": 60.0,
      "evtOrderErr": true,
      "evtOrderErrScore": 45.0,
      "epcDup": true,
      "epcDupScore": 90.0
    },
    ...
  ],



   // EPC ì½”ë“œë³„ ì´ìƒí•œ ì• ë“¤ í†µê³„(ì´ìƒí•œ ì• ë“¤ë§Œ ì „ë‹¬)
  "epcAnomalyStats": [
    {
      "epcCode": "001.8804823 â€¦ 000000001",
      "totalEvents": 5, //epcì½”ë“œë³„ ì˜¤ë¥˜ ì´í•©
      "jumpCount": 1, 
      "evtOrderErrCount": 2,
      "epcFakeCount": 1,
      "epcDupCount": 2, 
      â€œlocErrCountâ€: 0
    },
    ...
  ],

   // fileIdë³„ ì´ìƒì¹˜ ì „ì²´ í†µê³„
  "fileAnomalyStats": {
    "totalEvents": 100,
     "jumpCount": 1, 
      "evtOrderErrCount": 2,
      "epcFakeCount": 1,
      "epcDupCount": 2, 
      â€œlocErrCountâ€: 0
  }
}



ğŸ“„ JSON êµ¬ì¡° ì„¤ëª… (íŒŒì¼ ë‹¨ìœ„ ì´ìƒì¹˜ ë¶„ì„ ê²°ê³¼)

1. fileId
  - ë¶„ì„ ëŒ€ìƒ CSV íŒŒì¼ì„ êµ¬ë¶„í•˜ëŠ” ID
  - ì „ì²´ êµ¬ì¡°ì—ì„œ ê¸°ì¤€ì´ ë˜ëŠ” ë‹¨ì¼ íŒŒì¼ ì‹ë³„ì

2. EventHistory  â† ë°±ì—”ë“œë¡œ ë¶€í„° ì…ë ¥ë°›ì€ ëª¨ë“  epcì½”ë“œì— ëŒ€í•œ ì´ìƒì¹˜ ê¸°ë¡
  - eventId: ë°±ì—”ë“œì—ì„œ ì „ë‹¬í•˜ëŠ” ê³ ìœ  ì´ë²¤íŠ¸ ì‹ë³„ì (event_type + location_id + event_time ì¡°í•©)
  - ê° ì´ìƒì¹˜ ìœ í˜•: true/falseë¡œ ì´ìƒ ì—¬ë¶€. falseì˜ ê²½ìš°ì—” ì „ë‹¬í•˜ì§€ ì•Šê³  trueë§Œ ì „ë‹¬.
      ì˜ˆ: jump: true, epcDup: true, evtOrderErr: true
  - ê° ì´ìƒì¹˜ì— ëŒ€í•œ score í¬í•¨
      ì˜ˆ: jumpScore: 60.0, epcDupScore: 90.0 (ë°±ì—”ë“œëŠ” float íƒ€ì…ìœ¼ë¡œ ì €ì¥ í•  ì˜ˆì •ì´ë©° , ì´ëŠ” ì¶”í›„ lstmë“±ì˜ ì´ìš©ì‹œ ì†Œìˆ«ì ê°’ ì¶œë ¥ì„ ëŒ€ë¹„)

3. epcAnomalyStats  â† EPC ì½”ë“œë³„ ì´ìƒ í†µê³„
  - epcCode: ì œí’ˆ ê°œì²´ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ì½”ë“œ
  - totalEvents: ì´ EPC ì „ì²´ ì‹œí€€ìŠ¤ì—ì„œ ë°œìƒí•œ ì´ìƒì¹˜ ê°¯ìˆ˜ ì „ì²´
  - ê° ì´ìƒì¹˜ ìœ í˜•ì— ëŒ€í•´ ëª‡ ë²ˆ ê°ì§€ë˜ì—ˆëŠ”ì§€ë„ ì¶œë ¥ í•„ìš”
      ì˜ˆ: jumpCount: 1, evtOrderErrCount: 2, epcDupCount: 1

4. fileAnomalyStats  â† íŒŒì¼ ì „ì²´ ì´ìƒ í†µê³„
  - totalEvents: íŒŒì¼ ë‚´ ì „ì²´ ë°œìƒí•œ ì´ìƒì¹˜ ê°¯ìˆ˜ ì´í•©
  - ê° ì´ìƒì¹˜ ìœ í˜•ë³„ ì´ ê°ì§€ íšŸìˆ˜
      ì˜ˆ: jumpCount: 4, evtOrderErrCount: 7, epcDupCount: 3

ğŸ“Œ ìš”ì•½
- EventHistory â†’ ì „ì²´ ì¸í’‹ ê´€ë ¨ ë‚´ìš© ë‹¤ ë‹´ëŠ” ë¦¬ìŠ¤íŠ¸
- epcAnomalyStats â†’ í•œ EPC ì½”ë“œ ì•ˆì˜ í†µê³„ ìš”ì•½
- fileAnomalyStats â†’ ì „ì²´ íŒŒì¼ ë‹¨ìœ„ì˜ ì´ í†µê³„

POST /api/v1/barcode-anomaly-detect 
ë°±ì—”ë“œê°€ ë°ì´í„°ëª¨ë¸ìª½ì—ì„œ ë°ì´í„° ë°›ì„ë•Œ apiì£¼ì†Œ

GET /api/manager/export
ë°±ì—”ë“œê°€ ë°ì´í„°ëª¨ë¸ìª½ì— ê²Ÿìœ¼ë¡œ ë°ì´í„° ì¤„ë•Œ api ì£¼ì†Œ


ì†ŒìŠ¤ íŒŒì¼ë³´ê³  íë¦„ ì •ë¦¬ì¢€í•´ì¤˜. 
ê·¼ë° ë‹¤ í”„ë¡¬í”„íŠ¸ë¡œ í•œê±°ë¼ì„œ ë‚´ê°€ ë°ì´í„°ë¶„ì„ê°€ë¡œì„œ ì—­ëŸ‰ì„ í‚¤ìš¸ìˆ˜ê°€ ì—†ì—ˆì–´. êµìˆ˜ë‹˜ì´ svmì„±ëŠ¥ì€ ë£°ë² ì´ìŠ¤ë³´ë‹¤ ì˜ ë‚˜ì˜¬ìˆ˜ ì—†ë‹¤ê³  ì§€ê¸ˆ ë‚˜ì˜¤ëŠ” svmì„±ëŠ¥ì´ ìµœì„ ì´ëƒ ë¬¼ì–´ë³´ê³  ì´ì œ lstmì´ë‚˜ ë‹¤ë¥¸ëª¨ë¸ë„ ìƒê°í•´ë³´ë¼ê³ 
lstmí•˜ë©´ ê¸°ì¡´ì „ì²˜ë¦¬ ê³ ë ¤í•˜ì§€ë§ê³  ë°ì´í„°ë§Œë´ì„œ ì „ì²˜ë¦¬í•´ì•¼í•¨. ì „ì²˜ë¦¬ì„ì´ë©´ ì•ˆë¨. lstmì— ë¨¹ì¼ ë°ì´í„°ëŠ” ë”°ë¡œ ì „ì²˜ë¦¬í•´ì•¼í•¨. ì´ë ‡ê²Œ ë§ì”€í•˜ì‹œë©´ì„œ ì˜µí‹°ë§ˆì´ì €ë‚˜ ê·¸ëŸ°ê²ƒë„ ì˜í•˜ê³  
í”„ë¡¬í”„íŠ¸ê°€ ì¤‘ìš”í•œê²Œ ì•„ë‹ˆë¼ ë°ì´í„°ë¶„ì„ì´ë¼ëŠ” í•µì‹¬ì„ ì˜í•˜ë©´ì„œ í”„ë¡¬í”„íŠ¸ë¥¼ í™œìš©í• ì¤„ì•Œì•„ì•¼í•œë‹¤ í•˜ì‹œëŠ”ë° 

ìœ ë‹ˆí…ŒìŠ¤íŠ¸ ë³„ë„í´ë”ì—  ë‘¬ì•¼í•¨
í…ŒìŠ¤íŠ¸ì½”ë“œ ì§œë‹¬ë¼ê³ , í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ë³´ë©´ ë‚˜ë¨¸ì§€ì•ˆë´ë„ ë¨.  íŒŒì¼í•˜ë‚˜ë§Œë“¤ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ë§Œë“¤ì–´ë¼í•´ì•¼í•¨. ë³¸ì²´ë§ê³  í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì„¤ëª…ë¶€í„° ë‚˜ì—ê²Œ í•˜ë¼ê³  í•´ì•¼í•¨. 


validate_manufacture_date ê°€ ê°ì§€í•˜ëŠ” ì¡°ê±´ë¬¸
1.ì œì¡°ì¼ìê°€ ì˜¤ëŠ˜ë³´ë‹¤ ë¯¸ë˜ì¸ê°€
2.ì œì¡°ì¼ë¡œë¶€í„° ì˜¤ëŠ˜ê¹Œì§€ì˜ ë‚ ì§œ ì°¨ì´ê°€ 5ë…„ë³´ë‹¤ ë” ë‚˜ëŠ”ê°€

calculate_epc_fake_score
1.